/**
 * Imperium 4X (Web) - Cube
 * ===
 *
 * @module cube
 */

////////////////////////////////////////////////////////////////////////////////
// Imports
////////////////////////////////////////////////////////////////////////////////
import Point3D from './point3d';
import Hexagon from './hexagon';

////////////////////////////////////////////////////////////////////////////////
// Definitions
////////////////////////////////////////////////////////////////////////////////
const DIRECTIONS = [
  [0, 1, -1],
  [1, 0, -1],
  [1, -1, 0],
  [0, -1, 1],
  [-1, 0, 1],
  [-1, 1, 0]
];

////////////////////////////////////////////////////////////////////////////////
// Class
////////////////////////////////////////////////////////////////////////////////
class Cube extends Point3D{
  //////////////////////////////////////////////////////////////////////////////
  // Private Properties
  //////////////////////////////////////////////////////////////////////////////

  //////////////////////////////////////////////////////////////////////////////
  // Public Properties
  //////////////////////////////////////////////////////////////////////////////

  constructor(x, y, z){
    super(x, y, z);
  }

  //////////////////////////////////////////////////////////////////////////////
  // Public Methods
  //////////////////////////////////////////////////////////////////////////////
  findNeighbors(){
    let neighbors = [];
    for(let idx = 0; idx < DIRECTIONS.length; idx++){
      let direction = DIRECTIONS[idx];
      let x = this._x + direction[0];
      let y = this._y + direction[1];
      let z = this._z + direction[2];
      let cube = new Cube(x, y, z);
      neighbors.push(cube);
    }
    return neighbors;
  }

  toHexagon(){
    return new Hexagon(this._x, this._z);
  }

  //////////////////////////////////////////////////////////////////////////////
  // Private Methods
  //////////////////////////////////////////////////////////////////////////////

  //////////////////////////////////////////////////////////////////////////////
  // Static Methods
  //////////////////////////////////////////////////////////////////////////////
  static cubeAdd(a, b){
    if(!(a instanceof Cube) || !(b instanceof Cube)){
      throw new Error('input not of type Cube');
    }

    return new Cube(a.x + b.x, a.y + b.y, a.z + b.z);
  }

  static cubeDistance(a, b){
    if(!(a instanceof Cube) || !(b instanceof Cube)){
      throw new Error('input not of type Cube');
    }
    return Math.ceil((Math.abs(a.x - b.x) + Math.abs(a.y - b.y) + Math.abs(a.z - b.z)) / 2);
  }

  static cubeSubstract(a, b){
    if(!(a instanceof Cube) || !(b instanceof Cube)){
      throw new Error('input not of type Cube');
    }

    return new Cube(a.x - b.x, a.y - b.y, a.z - b.z);
  }
}

////////////////////////////////////////////////////////////////////////////////
// Exports
////////////////////////////////////////////////////////////////////////////////
export default Cube;